<!DOCTYPE html>
<html lang="fr">

<head>
    <%- include('./partials/head'); %>
</head>

<header>
    <%- include('./partials/header'); %>
</header>

<body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>


    <div data-bs-spy="scroll" data-bs-offset="0" class="scrollspy-example" tabindex="0">
        <div class="d-flex justify-content-center align-items-center ">
            <div class="centre-vertical body-content">
                <div class="card mx-auto b-2 my-2">
                    <div class="card-header text-center">
                        <h4>Ajoutez une offre</h4>
                    </div>
                    <div class="card-body ">
                        <form method="POST" action="/offre/ajout">
                            <div class="mb-3">
                                <label for="intitule" class="form-label">Intitulé :</label>
                                <input autofocus name="intitule" type="text" class="form-control" id="intitule"
                                    placeholder="Entrez l'intitulé du poste">
                            </div>
                            <div class="mb-3">
                                <label for="responsable" class="form-label">Responsable :</label>
                                <input autofocus name="responsable" type="text" class="form-control" id="responsable"
                                    placeholder="Entrez le nom du responsable">
                            </div>
                            <div class="mb-3">
                                <label for="lat" class="form-label">Latitude :</label>
                                <input name="lat" type="number" class="form-control" id="lat"
                                    placeholder="Entrez la latitude du siège social" step="0.00001">
                            </div>
                            <div class="mb-3">
                                <label for="long" class="form-label">Latitude :</label>
                                <input name="long" type="number" class="form-control" id="long"
                                    placeholder="Entrez la longitude du siège social" step="0.00001">
                            </div>
                            <div class="mb-3">
                                <label for="rythme" class="form-label">Rythme :</label>
                                <input autofocus name="rythme" type="number" class="form-control" id="rythme"
                                    placeholder="Entrez le rythme (ex : 35h/semaine)" step="0.5">
                            </div>
                            <div class="mb-3">
                                <label for="salaire_min" class="form-label">Salaire minimum :</label>
                                <input autofocus name="salaire_min" type="number" class="form-control" id="salaire_min"
                                    placeholder="Entrez le salaire minimum (ex : 1950 €/mois)" step="1">
                            </div>
                            <div class="mb-3">
                                <label for="salaire_max" class="form-label">Salaire maximum :</label>
                                <input autofocus name="salaire_max" type="number" class="form-control" id="salaire_max"
                                    placeholder="Entrez le Salaire maximum (ex : 1950 €/mois)" step="1">
                            </div>
                            <div class="mb-3">
                                <label for="missions" class="form-label">Missions :</label>
                                <input autofocus name="missions" type="text" class="form-control" id="missions"
                                    placeholder="Entrez les Missions">
                            </div>
                            <div class="mb-3">
                                <label for="activites" class="form-label">Activités :</label>
                                <input autofocus name="activites" type="text" class="form-control" id="activites"
                                    placeholder="Entrez les Activités">
                            </div>
                            <div class="mb-3">
                                <label for="competences" class="form-label">Compétences :</label>
                                <input autofocus name="competences" type="text" class="form-control" id="competences"
                                    placeholder="Entrez les Compétences attendues">
                            </div>
                            <!-- <div class="mb-3">
                                <label for="statut" class="form-label">Statut :</label>
                                <input autofocus name="statut" type="text" class="form-control" id="statut"
                                    placeholder="Entrez les Statut du poste">
                            </div> -->
                            <!-- Gestion du statut -->
                            <div class="mb-3">
                                <label for="siren" class="form-label">Siren de l'entreprise :</label>
                                <select id="siren" name="siren" class="form-select">
                                    <% if (Array.isArray(sirens)) { %>
                                        <% sirens.forEach(function (siren) { %>
                                            <option>
                                                <%= siren.siren_orga %>
                                            </option>
                                            <% }) %>
                                                <% } else { %>
                                                    <option>
                                                        <%= sirens.siren_orga %>
                                                    </option>
                                                    <% } %>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="statut" class="form-label">Statut :</label>
                                <select id="statut" name="statut" class="form-select">
                                    <% statuts.forEach((statut)=> { %>
                                        <option>
                                            <%= statut.nom %>
                                        </option>
                                        <% }) %>
                                            <option>Autre</option>
                                </select>
                            </div>
                            <div class="addStatut" style="display: none;">
                                <h4>Création de votre nouveau statut :</h4>
                                <div class="mb-3">
                                    <label for="newNom" class="form-label">Statut :</label>
                                    <input name="newNom" class="form-control" id="newNom" rows="3"
                                        placeholder="Entrez le nouveau statut">
                                </div>
                                <div class="mb-3">
                                    <label for="newDescription" class="form-label">Description :</label>
                                    <input name="newDescription" class="form-control" id="newDescription" rows="3"
                                        placeholder="Entrez une description du statut">
                                </div>
                            </div>
                            <!-- Fin gestion statut -->
                            <!-- Type metier -->
                            <div class="mb-3">
                                <label for="type_metier" class="form-label">Type métier de l'entreprise :</label>
                                <select id="type_metier" name="type_metier" class="form-select">
                                    <% type_metiers.forEach((TM)=> { %>
                                        <option>
                                            <%= TM.nom %>
                                        </option>
                                        <% }) %>
                                            <option>Autre</option>
                                </select>
                            </div>
                            <div class="addtype_metier" style="display: none;">
                                <h4>Création de votre nouveau Type métier :</h4>
                                <div class="mb-3">
                                    <label for="newNomTM" class="form-label">Statut :</label>
                                    <input name="newNomTM" class="form-control" id="newNomTM" rows="3"
                                        placeholder="Entrez le nouveau Type métier">
                                </div>
                                <div class="mb-3">
                                    <label for="newDescriptionTM" class="form-label">Description :</label>
                                    <input name="newDescriptionTM" class="form-control" id="newDescriptionTM" rows="3"
                                        placeholder="Entrez une description du Type métier">
                                </div>
                            </div>
                            <!-- fin type metier  -->
                            <div class=" text-center mt-4 ">
                                <button type="submit " class="btn btn-primary btn-block ">Ajouter l'offre</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

<%- include('./partials/footer'); %>

    <script>
        document.getElementById("statut").addEventListener("change", function () {
            if (document.getElementById("statut").value == "Autre") {
                document.getElementsByClassName("addStatut")[0].style.display = "block";
            } else {
                document.getElementsByClassName("addStatut")[0].style.display = "none";
            }
        });
        document.getElementById("type_metier").addEventListener("change", function () {
            if (document.getElementById("type_metier").value == "Autre") {
                document.getElementsByClassName("addtype_metier")[0].style.display = "block";
            } else {
                document.getElementsByClassName("addtype_metier")[0].style.display = "none";
            }
        });
    </script>

</html>